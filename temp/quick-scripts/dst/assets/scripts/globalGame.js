
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/globalGame.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '1c04cewIodMKZmQhbD7lezO', 'globalGame');
// scripts/globalGame.js

"use strict";

window.global = {
  persons: [],
  nowTurn: 0,
  //当前回合数
  isOver: false,
  cardnode: null,
  bgm: {
    audio: null,
    loop: null,
    volume: null
  }
};
cc.Class({
  "extends": cc.Component,
  properties: {
    mapObj: null,
    //地图对象
    persons: null,
    //玩家们
    index: 0,
    nowStep: 0,
    nowPlayer: null,
    nowProperty: null,
    isWait: false,
    msgBoxConent: null
  },
  updateUI: function updateUI() {//更新人物血量
  },
  onLoad: function onLoad() {
    //加载地图
    this.nowStep = 0;
    this.msgContent = cc.find('Canvas/msgBox/view/content/item'); //console.log(msgContent.getComponent(cc.Label));

    this.node.on('send-Msg', function (event, poster) {
      var name = '<color=#43CD80>' + poster + '</color>';

      if (poster == '系统') {
        name = '<color=#ff0000>' + poster + '</color>';
      }

      this.msgContent.getComponent(cc.RichText).string += name + ": " + event + '<br/>'; //可能需要动态改变content大小

      cc.find('Canvas/msgBox/view/content').height = this.msgContent.height + 10;
      cc.find('Canvas/msgBox').getComponent(cc.ScrollView).scrollToBottom(0.1); //console.log('Label',this.msgContent.height);
    }, this);
    this.node.on('update-state', function (msg) {
      this.nowStep = (this.nowStep + 1) % 4;
      this.isWait = false;
    }, this);
    cc.game.on('stepOnCell-done', function (event) {
      //触发结束
      this.node.emit('update-state', '1'); //更新状态
      //console.log("触发了特殊格子！");
    }, this);
    cc.game.on('route-chosen', function (route) {
      //监听玩家选择了哪条路径
      //console.log('点击了',route);
      this.nowProperty.moveByRoute(route); //this.node.emit('update-state', '1');//玩家移动完成，进入下一步操作
      //玩家头像按照路径移动
    }, this);
    this.InitialCard();
    this.initBgm();
  },
  start: function start() {
    //初始化人物
    this.initPersons(); //获得地图对象

    this.mapObj = cc.find('Canvas/map').getComponent('GetMap');
    this.nowPlayer = window.global.persons[this.index];
  },
  update: function update(dt) {
    //判断当前回合是否结束
    console.log("是否等待操作", this.isWait);

    switch (this.nowStep) {
      case 0:
        {
          //初始化变量
          if (this.isWait) {
            //正在操作或等待操作
            break;
          } //this.node.emit('send-Msg','进入回合'+window.global.nowTurn,'系统');
          //console.log(this.nowPlayer.name);


          this.nowProperty = this.nowPlayer.getComponent('Person'); //获得玩家属性集合

          this.node.emit('send-Msg', '轮到角色' + this.nowProperty.nickname, '系统');
          this.node.emit('update-state', '1');
          break;
        }

      case 1:
        {
          //玩家移动
          if (this.isWait) {
            //正在操作或等待操作
            break;
          }

          if (this.nowProperty.goEnabled) {
            //判断玩家是否可以行走
            var step = randomNum(1, 6); //掷骰子，玩家步数

            this.node.emit('send-Msg', "获得骰子点数" + step, this.nowProperty.nickname);
            this.isWait = true;
            console.log(this.mapObj.posEnable(this.mapObj.map[this.nowProperty.posX][this.nowProperty.posY], step));
          } else {
            this.nowProperty.goEnabled = 1;
            this.node.emit('update-state', '1');
          }

          break;
        }

      case 2:
        {
          //完成了事件触发或者卡牌触发
          if (this.isWait) {
            //正在操作或等待操作
            break;
          }

          console.log("当前步骤：", this.nowStep);
          console.log("玩家出牌");
          this.node.emit('update-state', '1');
          break;
        }

      case 3:
        {
          //console.log("当前步骤：",this.nowStep);
          //当前玩家的回合数-1
          this.nowProperty.turn -= 1;

          if (this.nowProperty.turn == 0) //当前玩家回合数为0，应该切换玩家
            {
              console.log("切换角色");
              this.nowProperty.turn += 1;
              this.index = (this.index + 1) % 4;
              this.nowPlayer = window.global.persons[this.index];
            }

          this.node.emit('update-state', '1');
          break;
        }
    }
  },
  initPersons: function initPersons() {
    window.global.persons[0].getComponent('Person').bindAvatar(cc.find('Canvas/avatar/avatar1'));
    window.global.persons[1].getComponent('Person').bindAvatar(cc.find('Canvas/avatar/avatar2'));
    window.global.persons[2].getComponent('Person').bindAvatar(cc.find('Canvas/avatar/avatar3'));
    window.global.persons[3].getComponent('Person').bindAvatar(cc.find('Canvas/avatar/avatar4'));
    window.global.persons[0].getComponent('Person').nickname = '老叟';
    window.global.persons[1].getComponent('Person').nickname = '少妇';
    window.global.persons[2].getComponent('Person').nickname = '富商';
    window.global.persons[3].getComponent('Person').nickname = '小女'; //初始化四个玩家位置
    //console.log(this.mapObj.map[0][0].getPosition());

    window.global.persons[0].getComponent('Person').move2Pos(0, 0);
    window.global.persons[1].getComponent('Person').move2Pos(10, 10);
    window.global.persons[2].getComponent('Person').move2Pos(0, 10);
    window.global.persons[3].getComponent('Person').move2Pos(10, 0);

    for (var i = 0; i < window.global.persons.length; i++) {
      var nowPerson = window.global.persons[i];
      var ctx = cc.find("bloodBar/bar", nowPerson).getComponent(cc.Graphics);
      ctx.clear();
      ctx.strokeColor = cc.Color.RED;
      ctx.moveTo(-40, -150);
      ctx.lineWidth = 10;
      ctx.lineTo(60, -150);
      ctx.stroke();
      var text = cc.find("bloodBar/text", nowPerson);
      text.getComponent(cc.Label).fontSize = 25;
      console.log(text.getComponent(cc.Label));
      text.setPosition(-100, -150); //设置行动值

      ctx = cc.find("mobilityBar/bar", nowPerson).getComponent(cc.Graphics);
      ctx.clear();
      ctx.strokeColor = cc.Color.GREEN;
      ctx.moveTo(-40, -180);
      ctx.lineTo(60, -180);
      ctx.lineWidth = 10;
      ctx.stroke();
      text = cc.find("mobilityBar/text", nowPerson);
      text.getComponent(cc.Label).fontSize = 25;
      console.log(text.getComponent(cc.Label));
      text.setPosition(-100, -200);
    }
  },
  initBgm: function initBgm() {
    cc.loader.loadRes('bgm/天空之城钢琴曲', cc.AudioClip, function (err, clip) {
      var audioID = cc.audioEngine.play(clip, true, 0.5);
    });
  },
  InitialCard: function InitialCard() {
    var cardName = ['炸弹', '精准导弹', '地雷', '庇护', '天使的庇护', '战神的祝福', '虚弱', '团队的力量', '治愈', '圣光普照', '望远镜', '眼睛', '猛男的祝福', '盗取', '束缚', '迷惑', '拯救'];
    var totCardNum = 17;
    window.global.cardnode = new Array();

    for (var i = 0; i < totCardNum; i++) {
      var node = new cc.Node(cardName[i]);
      node.addComponent(cc.Sprite);
      node.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(cc.url.raw('resources/卡牌图片/' + cardName[i] + '.jpg'));
      window.global.cardnode.push(node);
    }

    this.initBgm();
  }
}); //生成从minNum到maxNum的随机数

function randomNum(minNum, maxNum) {
  switch (arguments.length) {
    case 1:
      return parseInt(Math.random() * minNum + 1, 10);
      break;

    case 2:
      return parseInt(Math.random() * (maxNum - minNum + 1) + minNum, 10);
      break;

    default:
      return 0;
      break;
  }
}

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcZ2xvYmFsR2FtZS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJnbG9iYWwiLCJwZXJzb25zIiwibm93VHVybiIsImlzT3ZlciIsImNhcmRub2RlIiwiYmdtIiwiYXVkaW8iLCJsb29wIiwidm9sdW1lIiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJtYXBPYmoiLCJpbmRleCIsIm5vd1N0ZXAiLCJub3dQbGF5ZXIiLCJub3dQcm9wZXJ0eSIsImlzV2FpdCIsIm1zZ0JveENvbmVudCIsInVwZGF0ZVVJIiwib25Mb2FkIiwibXNnQ29udGVudCIsImZpbmQiLCJub2RlIiwib24iLCJldmVudCIsInBvc3RlciIsIm5hbWUiLCJnZXRDb21wb25lbnQiLCJSaWNoVGV4dCIsInN0cmluZyIsImhlaWdodCIsIlNjcm9sbFZpZXciLCJzY3JvbGxUb0JvdHRvbSIsIm1zZyIsImdhbWUiLCJlbWl0Iiwicm91dGUiLCJtb3ZlQnlSb3V0ZSIsIkluaXRpYWxDYXJkIiwiaW5pdEJnbSIsInN0YXJ0IiwiaW5pdFBlcnNvbnMiLCJ1cGRhdGUiLCJkdCIsImNvbnNvbGUiLCJsb2ciLCJuaWNrbmFtZSIsImdvRW5hYmxlZCIsInN0ZXAiLCJyYW5kb21OdW0iLCJwb3NFbmFibGUiLCJtYXAiLCJwb3NYIiwicG9zWSIsInR1cm4iLCJiaW5kQXZhdGFyIiwibW92ZTJQb3MiLCJpIiwibGVuZ3RoIiwibm93UGVyc29uIiwiY3R4IiwiR3JhcGhpY3MiLCJjbGVhciIsInN0cm9rZUNvbG9yIiwiQ29sb3IiLCJSRUQiLCJtb3ZlVG8iLCJsaW5lV2lkdGgiLCJsaW5lVG8iLCJzdHJva2UiLCJ0ZXh0IiwiTGFiZWwiLCJmb250U2l6ZSIsInNldFBvc2l0aW9uIiwiR1JFRU4iLCJsb2FkZXIiLCJsb2FkUmVzIiwiQXVkaW9DbGlwIiwiZXJyIiwiY2xpcCIsImF1ZGlvSUQiLCJhdWRpb0VuZ2luZSIsInBsYXkiLCJjYXJkTmFtZSIsInRvdENhcmROdW0iLCJBcnJheSIsIk5vZGUiLCJhZGRDb21wb25lbnQiLCJTcHJpdGUiLCJzcHJpdGVGcmFtZSIsIlNwcml0ZUZyYW1lIiwidXJsIiwicmF3IiwicHVzaCIsIm1pbk51bSIsIm1heE51bSIsImFyZ3VtZW50cyIsInBhcnNlSW50IiwiTWF0aCIsInJhbmRvbSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQUEsTUFBTSxDQUFDQyxNQUFQLEdBQWM7QUFDYkMsRUFBQUEsT0FBTyxFQUFDLEVBREs7QUFFYkMsRUFBQUEsT0FBTyxFQUFDLENBRks7QUFFSDtBQUNWQyxFQUFBQSxNQUFNLEVBQUMsS0FITTtBQUliQyxFQUFBQSxRQUFRLEVBQUcsSUFKRTtBQUtiQyxFQUFBQSxHQUFHLEVBQUM7QUFDSEMsSUFBQUEsS0FBSyxFQUFDLElBREg7QUFFSEMsSUFBQUEsSUFBSSxFQUFDLElBRkY7QUFHSEMsSUFBQUEsTUFBTSxFQUFDO0FBSEo7QUFMUyxDQUFkO0FBV0FDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNkQyxJQUFBQSxNQUFNLEVBQUMsSUFETztBQUNGO0FBQ1paLElBQUFBLE9BQU8sRUFBQyxJQUZNO0FBRUQ7QUFDYmEsSUFBQUEsS0FBSyxFQUFDLENBSFE7QUFJZEMsSUFBQUEsT0FBTyxFQUFDLENBSk07QUFLZEMsSUFBQUEsU0FBUyxFQUFDLElBTEk7QUFNZEMsSUFBQUEsV0FBVyxFQUFDLElBTkU7QUFPZEMsSUFBQUEsTUFBTSxFQUFDLEtBUE87QUFRZEMsSUFBQUEsWUFBWSxFQUFDO0FBUkMsR0FIUDtBQWNMQyxFQUFBQSxRQUFRLEVBQUMsb0JBQVUsQ0FDckI7QUFDQSxHQWhCTztBQWtCTEMsRUFBQUEsTUFsQkssb0JBa0JLO0FBQ1o7QUFDQSxTQUFLTixPQUFMLEdBQWEsQ0FBYjtBQUNBLFNBQUtPLFVBQUwsR0FBZ0JiLEVBQUUsQ0FBQ2MsSUFBSCxDQUFRLGlDQUFSLENBQWhCLENB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bUI2QyxNQUFuQixFQUEwQkMsTUFBMUIsRUFBaUM7QUFDN0IsVUFBT0MsU0FBUyxDQUFDdEMsTUFBakI7QUFDSSxTQUFLLENBQUw7QUFDSSxhQUFPdUMsUUFBUSxDQUFDQyxJQUFJLENBQUNDLE1BQUwsS0FBY0wsTUFBZCxHQUFxQixDQUF0QixFQUF3QixFQUF4QixDQUFmO0FBQ0o7O0FBQ0EsU0FBSyxDQUFMO0FBQ0ksYUFBT0csUUFBUSxDQUFDQyxJQUFJLENBQUNDLE1BQUwsTUFBZUosTUFBTSxHQUFDRCxNQUFQLEdBQWMsQ0FBN0IsSUFBZ0NBLE1BQWpDLEVBQXdDLEVBQXhDLENBQWY7QUFDSjs7QUFDSTtBQUNJLGFBQU8sQ0FBUDtBQUNKO0FBVFI7QUFXSCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lmdsb2JhbD17XHJcblx0cGVyc29uczpbXSxcclxuXHRub3dUdXJuOjAsLy/lvZPliY3lm57lkIjmlbBcclxuXHRpc092ZXI6ZmFsc2UsXHJcblx0Y2FyZG5vZGUgOiBudWxsLFxyXG5cdGJnbTp7XHJcblx0XHRhdWRpbzpudWxsLFxyXG5cdFx0bG9vcDpudWxsLFxyXG5cdFx0dm9sdW1lOm51bGwsXHJcblx0fVxyXG59O1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG5cdFx0bWFwT2JqOm51bGwsLy/lnLDlm77lr7nosaFcclxuXHRcdHBlcnNvbnM6bnVsbCwvL+eOqeWutuS7rFxyXG5cdFx0aW5kZXg6MCxcclxuXHRcdG5vd1N0ZXA6MCxcclxuXHRcdG5vd1BsYXllcjpudWxsLFxyXG5cdFx0bm93UHJvcGVydHk6bnVsbCxcclxuXHRcdGlzV2FpdDpmYWxzZSxcclxuXHRcdG1zZ0JveENvbmVudDpudWxsLFxyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVVSTpmdW5jdGlvbigpe1xyXG5cdFx0Ly/mm7TmlrDkurrnianooYDph49cclxuXHR9LFxyXG5cclxuICAgIG9uTG9hZCAoKSB7XHJcblx0XHQvL+WKoOi9veWcsOWbvlxyXG5cdFx0dGhpcy5ub3dTdGVwPTA7XHJcblx0XHR0aGlzLm1zZ0NvbnRlbnQ9Y2MuZmluZCgnQ2FudmFzL21zZ0JveC92aWV3L2NvbnRlbnQvaXRlbScpO1xyXG5cdFx0Ly9jb25zb2xlLmxvZyhtc2dDb250ZW50LmdldENvbXBvbmVudChjYy5MYWJlbCkpO1xyXG5cdFx0dGhpcy5ub2RlLm9uKCdzZW5kLU1zZycsZnVuY3Rpb24oZXZlbnQscG9zdGVyKXtcclxuXHRcdFx0dmFyIG5hbWU9Jzxjb2xvcj0jNDNDRDgwPicrcG9zdGVyKyc8L2NvbG9yPic7XHJcblx0XHRcdGlmIChwb3N0ZXI9PSfns7vnu58nKXtcclxuXHRcdFx0XHRuYW1lPSc8Y29sb3I9I2ZmMDAwMD4nK3Bvc3RlcisnPC9jb2xvcj4nO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMubXNnQ29udGVudC5nZXRDb21wb25lbnQoY2MuUmljaFRleHQpLnN0cmluZys9bmFtZStcIjogXCIrZXZlbnQrJzxici8+JztcclxuXHRcdFx0Ly/lj6/og73pnIDopoHliqjmgIHmlLnlj5hjb250ZW505aSn5bCPXHJcblx0XHRcdFxyXG5cdFx0XHRjYy5maW5kKCdDYW52YXMvbXNnQm94L3ZpZXcvY29udGVudCcpLmhlaWdodD10aGlzLm1zZ0NvbnRlbnQuaGVpZ2h0KzEwO1xyXG5cdFx0XHRjYy5maW5kKCdDYW52YXMvbXNnQm94JykuZ2V0Q29tcG9uZW50KGNjLlNjcm9sbFZpZXcpLnNjcm9sbFRvQm90dG9tKDAuMSk7XHJcblx0XHRcdC8vY29uc29sZS5sb2coJ0xhYmVsJyx0aGlzLm1zZ0NvbnRlbnQuaGVpZ2h0KTtcclxuXHRcdFx0IFxyXG5cdFx0fSx0aGlzKTtcclxuXHRcdFx0XHJcblx0XHR0aGlzLm5vZGUub24oJ3VwZGF0ZS1zdGF0ZScsIGZ1bmN0aW9uIChtc2cpIHtcclxuXHRcdFx0dGhpcy5ub3dTdGVwPSh0aGlzLm5vd1N0ZXArMSklNDtcclxuXHRcdFx0dGhpcy5pc1dhaXQ9ZmFsc2U7XHJcblx0XHRcdFxyXG5cdFx0fSx0aGlzKTtcclxuXHRcdGNjLmdhbWUub24oJ3N0ZXBPbkNlbGwtZG9uZScsIGZ1bmN0aW9uICggZXZlbnQgKSB7Ly/op6blj5Hnu5PmnZ9cclxuXHRcdFx0dGhpcy5ub2RlLmVtaXQoJ3VwZGF0ZS1zdGF0ZScsICcxJyk7Ly/mm7TmlrDnirbmgIFcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhcIuinpuWPkeS6hueJueauiuagvOWtkO+8gVwiKTtcclxuXHRcdH0sdGhpcyk7XHJcblx0XHRjYy5nYW1lLm9uKCdyb3V0ZS1jaG9zZW4nLCBmdW5jdGlvbihyb3V0ZSkgey8v55uR5ZCs546p5a626YCJ5oup5LqG5ZOq5p2h6Lev5b6EXHJcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCfngrnlh7vkuoYnLHJvdXRlKTtcclxuXHRcdFx0dGhpcy5ub3dQcm9wZXJ0eS5tb3ZlQnlSb3V0ZShyb3V0ZSk7XHJcblx0XHRcdFx0XHQvL3RoaXMubm9kZS5lbWl0KCd1cGRhdGUtc3RhdGUnLCAnMScpOy8v546p5a6256e75Yqo5a6M5oiQ77yM6L+b5YWl5LiL5LiA5q2l5pON5L2cXHJcblx0XHRcdFx0XHQvL+eOqeWutuWktOWDj+aMieeFp+i3r+W+hOenu+WKqFxyXG5cdFx0fSx0aGlzKTtcclxuXHRcdHRoaXMuSW5pdGlhbENhcmQoKTtcclxuXHRcdHRoaXMuaW5pdEJnbSgpO1xyXG5cdH0sXHJcblx0XHJcbiAgICBzdGFydCAoKSB7XHJcblx0XHQvL+WIneWni+WMluS6uueJqVxyXG5cdFx0dGhpcy5pbml0UGVyc29ucygpO1xyXG5cdFx0Ly/ojrflvpflnLDlm77lr7nosaFcclxuXHRcdHRoaXMubWFwT2JqPWNjLmZpbmQoJ0NhbnZhcy9tYXAnKS5nZXRDb21wb25lbnQoJ0dldE1hcCcpO1xyXG5cdFxyXG5cdFx0dGhpcy5ub3dQbGF5ZXI9d2luZG93Lmdsb2JhbC5wZXJzb25zW3RoaXMuaW5kZXhdO1xyXG5cdFx0XHJcblx0XHRcclxuXHRcdFxyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGUgKGR0KSB7XHJcblx0XHQvL+WIpOaWreW9k+WJjeWbnuWQiOaYr+WQpue7k+adn1xyXG5cdFx0XHJcblx0XHRjb25zb2xlLmxvZyhcIuaYr+WQpuetieW+heaTjeS9nFwiLHRoaXMuaXNXYWl0KTtcclxuXHRcdHN3aXRjaCAodGhpcy5ub3dTdGVwKXtcclxuXHRcdFx0Y2FzZSAwOnsvL+WIneWni+WMluWPmOmHj1xyXG5cdFx0XHRcdGlmICh0aGlzLmlzV2FpdCl7Ly/mraPlnKjmk43kvZzmiJbnrYnlvoXmk43kvZxcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL3RoaXMubm9kZS5lbWl0KCdzZW5kLU1zZycsJ+i/m+WFpeWbnuWQiCcrd2luZG93Lmdsb2JhbC5ub3dUdXJuLCfns7vnu58nKTtcclxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKHRoaXMubm93UGxheWVyLm5hbWUpO1xyXG5cdFx0XHRcdHRoaXMubm93UHJvcGVydHk9dGhpcy5ub3dQbGF5ZXIuZ2V0Q29tcG9uZW50KCdQZXJzb24nKTsvL+iOt+W+l+eOqeWutuWxnuaAp+mbhuWQiFxyXG5cdFx0XHRcdHRoaXMubm9kZS5lbWl0KCdzZW5kLU1zZycsJ+i9ruWIsOinkuiJsicrdGhpcy5ub3dQcm9wZXJ0eS5uaWNrbmFtZSwn57O757ufJyk7XHJcblx0XHRcdFx0dGhpcy5ub2RlLmVtaXQoJ3VwZGF0ZS1zdGF0ZScsICcxJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0Y2FzZSAxOnsvL+eOqeWutuenu+WKqFxyXG5cdFx0XHRcdGlmICh0aGlzLmlzV2FpdCl7Ly/mraPlnKjmk43kvZzmiJbnrYnlvoXmk43kvZxcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAodGhpcy5ub3dQcm9wZXJ0eS5nb0VuYWJsZWQpey8v5Yik5pat546p5a625piv5ZCm5Y+v5Lul6KGM6LWwXHJcblx0XHRcdFx0XHR2YXIgc3RlcD1yYW5kb21OdW0oMSw2KTsvL+aOt+mqsOWtkO+8jOeOqeWutuatpeaVsFxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR0aGlzLm5vZGUuZW1pdCgnc2VuZC1Nc2cnLFwi6I635b6X6aqw5a2Q54K55pWwXCIrc3RlcCx0aGlzLm5vd1Byb3BlcnR5Lm5pY2tuYW1lKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dGhpcy5pc1dhaXQ9dHJ1ZTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHRoaXMubWFwT2JqLnBvc0VuYWJsZSh0aGlzLm1hcE9iai5tYXBbdGhpcy5ub3dQcm9wZXJ0eS5wb3NYXVt0aGlzLm5vd1Byb3BlcnR5LnBvc1ldLHN0ZXApKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNle1xyXG5cdFx0XHRcdFx0dGhpcy5ub3dQcm9wZXJ0eS5nb0VuYWJsZWQ9MTtcclxuXHRcdFx0XHRcdHRoaXMubm9kZS5lbWl0KCd1cGRhdGUtc3RhdGUnLCAnMScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQgYnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0Y2FzZSAyOntcclxuXHRcdFx0XHQvL+WujOaIkOS6huS6i+S7tuinpuWPkeaIluiAheWNoeeJjOinpuWPkVxyXG5cdFx0XHRcdGlmICh0aGlzLmlzV2FpdCl7Ly/mraPlnKjmk43kvZzmiJbnrYnlvoXmk43kvZxcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIuW9k+WJjeatpemqpO+8mlwiLHRoaXMubm93U3RlcCk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCLnjqnlrrblh7rniYxcIik7XHJcblx0XHRcdFx0dGhpcy5ub2RlLmVtaXQoJ3VwZGF0ZS1zdGF0ZScsICcxJyk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0Y2FzZSAzOntcclxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKFwi5b2T5YmN5q2l6aqk77yaXCIsdGhpcy5ub3dTdGVwKTtcclxuXHRcdFx0XHQvL+W9k+WJjeeOqeWutueahOWbnuWQiOaVsC0xXHJcblx0XHRcdFx0dGhpcy5ub3dQcm9wZXJ0eS50dXJuLT0xO1xyXG5cdFx0XHRcdGlmICh0aGlzLm5vd1Byb3BlcnR5LnR1cm49PTApLy/lvZPliY3njqnlrrblm57lkIjmlbDkuLow77yM5bqU6K+l5YiH5o2i546p5a62XHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCLliIfmjaLop5LoibJcIik7XHJcblx0XHRcdFx0XHR0aGlzLm5vd1Byb3BlcnR5LnR1cm4rPTE7XHJcblx0XHRcdFx0XHR0aGlzLmluZGV4PSh0aGlzLmluZGV4KzEpJTQ7XHJcblx0XHRcdFx0XHR0aGlzLm5vd1BsYXllcj13aW5kb3cuZ2xvYmFsLnBlcnNvbnNbdGhpcy5pbmRleF07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHRoaXMubm9kZS5lbWl0KCd1cGRhdGUtc3RhdGUnLCAnMScpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHR9LFxyXG5cdGluaXRQZXJzb25zOmZ1bmN0aW9uKCl7XHJcblx0XHR3aW5kb3cuZ2xvYmFsLnBlcnNvbnNbMF0uZ2V0Q29tcG9uZW50KCdQZXJzb24nKS5iaW5kQXZhdGFyKGNjLmZpbmQoJ0NhbnZhcy9hdmF0YXIvYXZhdGFyMScpKTtcclxuXHRcdHdpbmRvdy5nbG9iYWwucGVyc29uc1sxXS5nZXRDb21wb25lbnQoJ1BlcnNvbicpLmJpbmRBdmF0YXIoY2MuZmluZCgnQ2FudmFzL2F2YXRhci9hdmF0YXIyJykpO1xyXG5cdFx0d2luZG93Lmdsb2JhbC5wZXJzb25zWzJdLmdldENvbXBvbmVudCgnUGVyc29uJykuYmluZEF2YXRhcihjYy5maW5kKCdDYW52YXMvYXZhdGFyL2F2YXRhcjMnKSk7XHJcblx0XHR3aW5kb3cuZ2xvYmFsLnBlcnNvbnNbM10uZ2V0Q29tcG9uZW50KCdQZXJzb24nKS5iaW5kQXZhdGFyKGNjLmZpbmQoJ0NhbnZhcy9hdmF0YXIvYXZhdGFyNCcpKTtcclxuXHRcdHdpbmRvdy5nbG9iYWwucGVyc29uc1swXS5nZXRDb21wb25lbnQoJ1BlcnNvbicpLm5pY2tuYW1lPSfogIHlj58nO1xyXG5cdFx0d2luZG93Lmdsb2JhbC5wZXJzb25zWzFdLmdldENvbXBvbmVudCgnUGVyc29uJykubmlja25hbWU9J+WwkeWmhyc7XHJcblx0XHR3aW5kb3cuZ2xvYmFsLnBlcnNvbnNbMl0uZ2V0Q29tcG9uZW50KCdQZXJzb24nKS5uaWNrbmFtZT0n5a+M5ZWGJztcclxuXHRcdHdpbmRvdy5nbG9iYWwucGVyc29uc1szXS5nZXRDb21wb25lbnQoJ1BlcnNvbicpLm5pY2tuYW1lPSflsI/lpbMnO1xyXG5cdFx0Ly/liJ3lp4vljJblm5vkuKrnjqnlrrbkvY3nva5cclxuXHRcdC8vY29uc29sZS5sb2codGhpcy5tYXBPYmoubWFwWzBdWzBdLmdldFBvc2l0aW9uKCkpO1xyXG5cdFx0d2luZG93Lmdsb2JhbC5wZXJzb25zWzBdLmdldENvbXBvbmVudCgnUGVyc29uJykubW92ZTJQb3MoMCwwKTtcclxuXHRcdHdpbmRvdy5nbG9iYWwucGVyc29uc1sxXS5nZXRDb21wb25lbnQoJ1BlcnNvbicpLm1vdmUyUG9zKDEwLDEwKTtcclxuXHRcdHdpbmRvdy5nbG9iYWwucGVyc29uc1syXS5nZXRDb21wb25lbnQoJ1BlcnNvbicpLm1vdmUyUG9zKDAsMTApO1xyXG5cdFx0d2luZG93Lmdsb2JhbC5wZXJzb25zWzNdLmdldENvbXBvbmVudCgnUGVyc29uJykubW92ZTJQb3MoMTAsMCk7XHJcblx0XHRmb3IgKHZhciBpPTA7aTx3aW5kb3cuZ2xvYmFsLnBlcnNvbnMubGVuZ3RoO2krKyl7XHJcblx0XHRcdHZhciBub3dQZXJzb249d2luZG93Lmdsb2JhbC5wZXJzb25zW2ldO1xyXG5cdFx0XHR2YXIgY3R4PWNjLmZpbmQoXCJibG9vZEJhci9iYXJcIiwgbm93UGVyc29uKS5nZXRDb21wb25lbnQoY2MuR3JhcGhpY3MpO1xyXG5cdFx0XHRjdHguY2xlYXIoKTtcclxuXHRcdFx0Y3R4LnN0cm9rZUNvbG9yID0gY2MuQ29sb3IuUkVEO1xyXG5cdFx0XHRjdHgubW92ZVRvKC00MCwgLTE1MCk7XHJcblx0XHRcdGN0eC5saW5lV2lkdGg9MTA7XHJcblx0XHRcdGN0eC5saW5lVG8oNjAsIC0xNTApO1xyXG5cdFx0XHRjdHguc3Ryb2tlKCk7ICAgXHJcblx0XHRcdHZhciB0ZXh0PWNjLmZpbmQoXCJibG9vZEJhci90ZXh0XCIsIG5vd1BlcnNvbik7XHJcblx0XHRcdHRleHQuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5mb250U2l6ZT0yNTtcclxuXHRcdFx0Y29uc29sZS5sb2codGV4dC5nZXRDb21wb25lbnQoY2MuTGFiZWwpKTtcclxuXHRcdFx0dGV4dC5zZXRQb3NpdGlvbigtMTAwLC0xNTApO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly/orr7nva7ooYzliqjlgLxcclxuXHRcdFx0Y3R4PWNjLmZpbmQoXCJtb2JpbGl0eUJhci9iYXJcIiwgbm93UGVyc29uKS5nZXRDb21wb25lbnQoY2MuR3JhcGhpY3MpO1xyXG5cdFx0XHRjdHguY2xlYXIoKTtcclxuXHRcdFx0Y3R4LnN0cm9rZUNvbG9yID0gY2MuQ29sb3IuR1JFRU47XHJcblx0XHRcdGN0eC5tb3ZlVG8oLTQwLCAtMTgwKTtcclxuXHRcdFx0Y3R4LmxpbmVUbyg2MCwgLTE4MCk7XHJcblx0XHRcdGN0eC5saW5lV2lkdGg9MTA7XHJcblx0XHRcdGN0eC5zdHJva2UoKTsgIFxyXG5cdFx0XHR0ZXh0PWNjLmZpbmQoXCJtb2JpbGl0eUJhci90ZXh0XCIsIG5vd1BlcnNvbik7XHJcblx0XHRcdHRleHQuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5mb250U2l6ZT0yNTtcclxuXHRcdFx0Y29uc29sZS5sb2codGV4dC5nZXRDb21wb25lbnQoY2MuTGFiZWwpKTtcclxuXHRcdFx0dGV4dC5zZXRQb3NpdGlvbigtMTAwLC0yMDApO1x0XHRcdFxyXG5cdFx0fVxyXG5cdH0sXHJcblx0aW5pdEJnbTpmdW5jdGlvbigpe1xyXG5cdFx0Y2MubG9hZGVyLmxvYWRSZXMoJ2JnbS/lpKnnqbrkuYvln47pkqLnkLTmm7InLCBjYy5BdWRpb0NsaXAsIGZ1bmN0aW9uIChlcnIsIGNsaXApIHtcclxuXHRcdFx0dmFyIGF1ZGlvSUQgPSBjYy5hdWRpb0VuZ2luZS5wbGF5KGNsaXAsIHRydWUsIDAuNSk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cdEluaXRpYWxDYXJkOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBjYXJkTmFtZSA9IFsn54K45by5Jywn57K+5YeG5a+85by5Jywn5Zyw6Zu3Jywn5bqH5oqkJywn5aSp5L2/55qE5bqH5oqkJywn5oiY56We55qE56Wd56aPJywn6Jma5byxJywn5Zui6Zif55qE5Yqb6YePJyxcclxuXHRcdFx0XHRcdFx0XHQn5rK75oSIJywn5Zyj5YWJ5pmu54WnJywn5pyb6L+c6ZWcJywn55y8552bJywn54yb55S355qE56Wd56aPJywn55uX5Y+WJywn5p2f57yaJywn6L+35oORJywn5ouv5pWRJ107XHJcblx0XHR2YXIgdG90Q2FyZE51bSA9IDE3O1xyXG5cdFx0d2luZG93Lmdsb2JhbC5jYXJkbm9kZSA9IG5ldyBBcnJheSgpO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0b3RDYXJkTnVtOyBpKyspIHtcclxuXHRcdFx0dmFyIG5vZGUgPSBuZXcgY2MuTm9kZShjYXJkTmFtZVtpXSk7XHJcblx0XHRcdG5vZGUuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSk7XHJcblx0XHRcdG5vZGUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUoY2MudXJsLnJhdygncmVzb3VyY2VzL+WNoeeJjOWbvueJhy8nK2NhcmROYW1lW2ldKycuanBnJykpO1xyXG5cdFx0XHR3aW5kb3cuZ2xvYmFsLmNhcmRub2RlLnB1c2gobm9kZSk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmluaXRCZ20oKTtcclxuXHR9LFxyXG59KTtcclxuXHJcblxyXG4vL+eUn+aIkOS7jm1pbk51beWIsG1heE51beeahOmaj+acuuaVsFxyXG5mdW5jdGlvbiByYW5kb21OdW0obWluTnVtLG1heE51bSl7IFxyXG4gICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpeyBcclxuICAgICAgICBjYXNlIDE6IFxyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoTWF0aC5yYW5kb20oKSptaW5OdW0rMSwxMCk7IFxyXG4gICAgICAgIGJyZWFrOyBcclxuICAgICAgICBjYXNlIDI6IFxyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoTWF0aC5yYW5kb20oKSoobWF4TnVtLW1pbk51bSsxKSttaW5OdW0sMTApOyBcclxuICAgICAgICBicmVhazsgXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7IFxyXG4gICAgICAgICAgICBicmVhazsgXHJcbiAgICB9IFxyXG59ICJdfQ==