{"version":3,"sources":["assets\\scripts\\AI.js"],"names":["cc","Class","Component","properties","cardCost","cardFunction","aiMove","routes","index","Math","floor","random","length","game","emit","aiTie","card","role","find","getComponent","nowPlayer","canSee","enemyInSight","goEnabled","mobility","removeCard","aiConfuse","useCardEnabled","Number","name","teammate","enemy1","enemy2","dis1","BfsDis","posX","posY","dis2","e12","vis","i","isDead","sight","push","j","eyes","k","aiBoom","boom_cell","x","y","map_matrix","r","c","map","adj","blood","attack","console","log","nickname","aiUseCard","cards","cardID","aiEye","eye_cell","dis","nowProperty","buff","todoList","endTurn","window","global","nowTurn","person","act","splice","aiSteal","rd","onLoad","Array","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        cardCost: null,\r\n\t\tcardFunction: null,\r\n    },\r\n\t\r\n\taiMove: function(routes) {\r\n\t\tvar index = Math.floor(Math.random()*routes.length);\r\n\t\tcc.game.emit('route-chosen', routes[index]);\r\n\t},\r\n\t\r\n\taiTie: function(card) {\r\n\t\tvar role=cc.find('Canvas').getComponent('globalGame').nowPlayer;\r\n\t\tvar canSee =  cc.find('Canvas').getComponent('AI').enemyInSight(role);\r\n\t\tif (canSee.length) {\r\n\t\t\tvar index = Math.floor(Math.random()*canSee.length);\r\n\t\t\tcanSee[index].goEnabled = 0;\r\n\t\t}\r\n\t\trole.mobility-=card.cardCost[14];\r\n        cc.find('Canvas/Deck').getComponent('Deck').removeCard(14);\r\n\t},\r\n\t\r\n\taiConfuse: function(card) {\r\n\t\tvar role=cc.find('Canvas').getComponent('globalGame').nowPlayer;\r\n\t\tvar canSee =  cc.find('Canvas').getComponent('AI').enemyInSight(role);\r\n\t\tif (canSee.length) {\r\n\t\t\tvar index = Math.floor(Math.random()*canSee.length);\r\n\t\t\tcanSee[index].useCardEnabled = 0;\r\n\t\t}\r\n\t\trole.mobility-=card.cardCost[15];\r\n        cc.find('Canvas/Deck').getComponent('Deck').removeCard(15);\r\n\t},\r\n\t\r\n\tenemyInSight: function(role) {\r\n\t\t//返回role和队友的视野内的敌人\r\n\t\tvar index=Number(role.name[6]);\r\n        var teammate=index+2>4?index-2:index+2;\r\n\t\tvar enemy1=index+1>4?index-3:index+1;\r\n        var enemy2=teammate+1>4?teammate-3:teammate+1;\r\n        enemy1=cc.find(\"Canvas/Persons/Person\"+enemy1).getComponent('Person');\r\n        enemy2=cc.find(\"Canvas/Persons/Person\"+enemy2).getComponent('Person');\r\n\t\trole=role.getComponent('Person');\r\n\t\tteammate=cc.find(\"Canvas/Persons/Person\"+teammate).getComponent('Person');\r\n\t\tvar dis1 = cc.find('Canvas/map').getComponent('GetMap').BfsDis(role.posX, role.posY);\r\n\t\tvar dis2 = cc.find('Canvas/map').getComponent('GetMap').BfsDis(teammate.posX, teammate.posY);\r\n\t\tvar e12 = [null, enemy1, enemy2];\r\n\t\tvar canSee = [];\r\n\t\tvar vis = [0, 0, 0];\r\n\t\tfor (var i = 1; i <= 2; i++) {\r\n\t\t\tif (e12[i].isDead == 1)\r\n\t\t\t\tcontinue;\r\n\t\t\tif (dis1[e12[i].posX][e12[i].posY] <= role.sight) {\r\n\t\t\t\tcanSee.push(e12[i]);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (dis2[e12[i].posX][e12[i].posY] <= teammate.sight) {\r\n\t\t\t\tcanSee.push(e12[i]);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tfor (var j = 0; j < role.eyes.length; j++)\r\n\t\t\t\tfor (var k = 0; k < role.eyes[j].length; k++)\r\n\t\t\t\t\tif (e12[i].posX == role.eyes[j][k][0] && e12[i].posY == role.eyes[j][k][1])\r\n\t\t\t\t\t\tif (vis[i] == 0) {\r\n\t\t\t\t\t\t\tcanSee.push(e12[i]);\r\n\t\t\t\t\t\t\tvis[i] = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\tfor (var j = 0; j < teammate.eyes.length; j++)\r\n\t\t\t\tfor (var k = 0; k < teammate.eyes[j].length; k++)\r\n\t\t\t\t\tif (e12[i].posX == teammate.eyes[j][k][0] && e12[i].posY == teammate.eyes[j][k][1])\r\n\t\t\t\t\t\tif (vis[i] == 0) {\r\n\t\t\t\t\t\t\tcanSee.push(e12[i]);\r\n\t\t\t\t\t\t\tvis[i] = 1;\r\n\t\t\t\t\t\t}\r\n\t\t}\r\n\t\treturn canSee;\r\n\t},\r\n\t\r\n\taiBoom: function(card) {\r\n\t\tvar role=cc.find('Canvas').getComponent('globalGame').nowPlayer;\r\n\t\tvar canSee =  cc.find('Canvas').getComponent('AI').enemyInSight(role);\r\n\t\tvar boom_cell = [], x, y;\r\n\t\tif (canSee.length) {\r\n\t\t\tvar index = Math.floor(Math.random()*canSee.length);\r\n\t\t\tboom_cell.push([e12[index].posX, e12[index].posY]);\r\n\t\t\tx = e12[index].posX;\r\n\t\t\ty = e12[index].posY;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar map_matrix = [\r\n\t\t\t\t[1,1,1,1,1,1,1,1,1,1,1],\r\n\t\t\t\t[1,1,0,0,0,1,0,0,0,1,1],\r\n\t\t\t\t[1,0,1,0,0,1,0,0,1,0,1],\r\n\t\t\t\t[1,0,0,1,1,0,1,1,0,0,1],\r\n\t\t\t\t[1,0,0,1,0,0,0,1,0,0,1],\r\n\t\t\t\t[1,1,1,1,1,1,1,1,1,1,1],\r\n\t\t\t\t[1,0,0,1,0,0,0,1,0,0,1],\r\n\t\t\t\t[1,0,0,1,1,0,1,1,0,0,1],\r\n\t\t\t\t[1,0,1,0,0,1,0,0,1,0,1],\r\n\t\t\t\t[1,1,0,0,0,1,0,0,0,1,1],\r\n\t\t\t\t[1,1,1,1,1,1,1,1,1,1,1],\r\n\t\t\t];\r\n\t\t\twhile (1) {\r\n\t\t\t\tvar r = Math.floor(Math.random()*11), c = Math.floor(Math.random()*11);\r\n\t\t\t\tif (map_matrix[r][c] == 1) {\r\n\t\t\t\t\tboom_cell.push([r, c]);\r\n\t\t\t\t\tx = r, y = c;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar map = cc.find('Canvas/map').getComponent('GetMap');\r\n\t\tfor (var i = 0; i < map.adj[x][y].length; i++)\r\n\t\t\tboom_cell.push(map.adj[x][y][i]);\r\n\t\tfor (var i = 0;i < boom_cell.length; i++) {\r\n\t\t\tif (boom_cell[i][0] == enemy1.posX && boom_cell[i][1] == enemy1.posY) {\r\n\t\t\t\tenemy1.blood -= role.attack*2; console.log(enemy1.nickname);}\r\n\t\t\tif (boom_cell[i][0] == enemy2.posX && boom_cell[i][1] == enemy2.posY) {\r\n\t\t\t\tenemy2.blood -= role.attack*2; console.log(enemy2.nickname);}\r\n\t\t\tif (enemy1.blood <= 0)\r\n\t\t\t\tenemy1.isDead = 1;\r\n\t\t\tif (enemy2.blood <= 0)\r\n\t\t\t\tenemy2.isDead = 1;\r\n\t\t}\r\n\t\trole.mobility-=card.cardCost[0];\r\n\t\tcc.find('Canvas/Deck').getComponent('Deck').removeCard(0);\r\n\t},\r\n\t\r\n\taiUseCard: function(role) {\r\n\t\twhile (role.cards.length > 0) {\r\n\t\t\tif (Math.random() < 0.5) {\r\n\t\t\t\tvar index = Math.floor(Math.random()*role.cards.length);\r\n\t\t\t\tvar cardID = role.cards[index];\r\n\t\t\t\tif (this.cardCost[cardID] > role.mobility)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t\r\n\t\t\t\tif (cardID == 0 || cardID == 11 || cardID == 13 || cardID == 14 || cardID == 15)\r\n\t\t\t\t\tthis.cardFunction[cardID](cc.find('Canvas/Card').getComponent('Card'));\r\n\t\t\t\telse\r\n\t\t\t\t\tcc.find('Canvas/Card').getComponent('Card').cardFunction[cardID](cc.find('Canvas/Card').getComponent('Card'));\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t},\r\n\t\r\n\taiEye: function(card) {\r\n\t\tvar x, y;\r\n\t\tvar eye_cell = [];\r\n\t\tvar map_matrix = [\r\n\t\t\t\t[1,1,1,1,1,1,1,1,1,1,1],\r\n\t\t\t\t[1,1,0,0,0,1,0,0,0,1,1],\r\n\t\t\t\t[1,0,1,0,0,1,0,0,1,0,1],\r\n\t\t\t\t[1,0,0,1,1,0,1,1,0,0,1],\r\n\t\t\t\t[1,0,0,1,0,0,0,1,0,0,1],\r\n\t\t\t\t[1,1,1,1,1,1,1,1,1,1,1],\r\n\t\t\t\t[1,0,0,1,0,0,0,1,0,0,1],\r\n\t\t\t\t[1,0,0,1,1,0,1,1,0,0,1],\r\n\t\t\t\t[1,0,1,0,0,1,0,0,1,0,1],\r\n\t\t\t\t[1,1,0,0,0,1,0,0,0,1,1],\r\n\t\t\t\t[1,1,1,1,1,1,1,1,1,1,1],\r\n\t\t\t];\r\n\t\twhile (1) {\r\n\t\t\tvar r = Math.floor(Math.random()*11), c = Math.floor(Math.random()*11);\r\n\t\t\tif (map_matrix[r][c] == 1) {\r\n\t\t\t\teye_cell.push([r, c]);\r\n\t\t\t\tx = r, y = c;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar map = cc.find('Canvas/map').getComponent('GetMap');\r\n\t\tvar dis = map.BfsDis(x,y);\r\n\t\tvar role=cc.find('Canvas').getComponent('globalGame').nowProperty;\r\n\t\tfor (var i=0;i<11;++i)\r\n\t\t\tfor (var j=0;j<11;++j){\r\n\t\t\t\tif (dis[i][j]!=-1&&dis[i][j]<=3)\r\n\t\t\t\t\teye_cell.push([i,j]);\r\n\t\t\t}\r\n\t\trole.eyes.push(eye_cell);\r\n\t\tvar buff=cc.find('Canvas').getComponent('Buff');\r\n\t\tbuff.todoList.push({\r\n\t\t\tendTurn:window.global.nowTurn+5,\r\n\t\t\tperson:role,\r\n\t\t\tact:function(){\r\n\t\t\t\tif (this.person != cc.find('Canvas').getComponent('globalGame').nowProperty)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\trole.eyes.splice(0,1);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\t\trole.mobility-=card.cardCost[11];\r\n\t\tcc.find('Canvas/Deck').getComponent('Deck').removeCard(11);\r\n\t},\r\n\t\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n\taiSteal: function(card) {\r\n\t\tvar role=cc.find('Canvas').getComponent('globalGame').nowPlayer;\r\n\t\tvar canSee =  cc.find('Canvas').getComponent('AI').enemyInSight(role);\r\n\t\tif (canSee.length) {\r\n\t\t\tvar index = Math.floor(Math.random()*canSee.length);\r\n\t\t\t\r\n\t\t\tif (canSee[index].cards.length) {\r\n\t\t\t\tvar rd = Math.floor(Math.random()*canSee[index].cards.length);\r\n\t\t\t\trole.cards.push(canSee[index].cards[rd]);\r\n\t\t\t\tcanSee[index].cards.splice(rd, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\trole.mobility-=card.cardCost[13];\r\n\t\tcc.find('Canvas/Deck').getComponent('Deck').removeCard(13);\r\n\t},\r\n\r\n    onLoad () {\r\n\t\tthis.cardFunction = new Array();\r\n\t\tthis.cardFunction[0] = this.aiBoom;\r\n\t\tthis.cardFunction[11] = this.aiEye;\r\n\t\tthis.cardFunction[14] = this.aiTie;\r\n\t\tthis.cardFunction[15] = this.aiConfuse;\r\n\t\tthis.cardCost=[4,3,2,3,3,4,4,5,2,3,3,3,3,3,4,4,5];\r\n\t},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}