{"version":3,"sources":["assets\\scripts\\Deck.js"],"names":["cc","Class","Component","properties","deck","Integer","role","addCard","cardID","push","choose_cancel","find","active","cardDetail","node","instantiate","name","scaleX","scaleY","setPosition","parent","closeDetail","destroy","chooseCard","getComponent","showCards","isPlayCard","nowStep","i","length","window","global","cardnode","on","console","log","closeCards","children","off","initDeck","nowPlayer","cards","onLoad","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        deck:[cc.Integer],\r\n        role: null,\r\n    },\r\n    \r\n    addCard:function(cardID){\r\n        deck.push(cardID);\r\n    },\r\n\tchoose_cancel:function(){\r\n        \r\n\t\tcc.find('Canvas/choose_card_confirm').active=false;\r\n        cc.find('Canvas/choose_card_cancel').active=false;        \r\n    },\r\n    cardDetail:function(){\r\n        var node=cc.instantiate(this);\r\n        node.name=\"card_detail\";\r\n        node.scaleX=1,node.scaleY=1;\r\n        node.setPosition(0,0);\r\n        node.parent=cc.find(\"Canvas\");\r\n    },\r\n    closeDetail:function(){\r\n        cc.find(\"Canvas/card_detail\").destroy();\r\n    },\r\n    chooseCard:function(){\r\n        var deck=cc.find(\"Canvas/Deck\").getComponent(\"Deck\");\r\n        deck.closeDetail();\r\n        // deck.closeCards();\r\n        //显示确定/取消按钮\r\n\t\tcc.find('Canvas/choose_card_confirm').active=true;\r\n        cc.find('Canvas/choose_card_cancel').active=true;\r\n        \r\n    },\t\r\n    showCards:function(){\r\n        var isPlayCard=(cc.find(\"Canvas\").getComponent(\"globalGame\").nowStep==3);\r\n        for (var i=0;i<this.deck.length;++i){\r\n            var cardID=this.deck[i];\r\n            var node=cc.instantiate(window.global.cardnode[cardID]);\r\n            node.scaleX=0.4,node.scaleY=0.4;\r\n            node.setPosition(200+i*200,0);\r\n            node.parent=this.node;\r\n            node.on(\"mouseenter\",this.cardDetail,node);\r\n            node.on(\"mouseleave\",this.closeDetail,node);\r\n            console.log(\"ispalycard:\",isPlayCard);\r\n\t\t\tif (isPlayCard==true){\r\n\t\t\t    node.on(\"mousedown\",this.chooseCard,node);\r\n\t\t\t}\r\n        }\r\n    },\r\n\tcloseCards:function(){\r\n\t\tvar children=cc.find(\"Canvas/Deck\").children;\r\n\t\tfor (var i=0;i<children.length;++i)\r\n\t\t\tchildren[i].destroy();\r\n\t\tthis.node.off(\"mousedown\",this.closeCards,this);\r\n\t\tthis.node.on(\"mousedown\",this.initDeck,this);\r\n    },\r\n    initDeck:function(){\r\n\t\tthis.role=cc.find(\"Canvas\").getComponent(\"globalGame\").nowPlayer;\r\n\t\tthis.deck=this.role.getComponent(\"Person\").cards;\r\n        this.showCards();\r\n        this.node.off(\"mousedown\",this.initDeck,this);\r\n        this.node.on(\"mousedown\",this.closeCards,this);\r\n    },\r\n    onLoad () {\r\n        \r\n    },\r\n\r\n    start () {\r\n\t\tthis.node.on(\"mousedown\",this.initDeck,this);\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}