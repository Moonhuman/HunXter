{"version":3,"sources":["assets\\scripts\\GetMap.js"],"names":["cc","Class","Component","properties","basex","basey","stepx","stepy","routes","cell","type","Prefab","map","adj","GetCell","map_matrix","Array","i","j","newcell","instantiate","parent","node","setPosition","cell_js","getComponent","mapx","mapy","kind","p","Math","random","GetEdge","edge","length","push","DfsForRoute","nowpos","num","vis","route","x","y","newroute","pop","chooseRoute","par","routeId","inMonitor","resetColor","off","game","emit","openMonitor","setColor","on","posEnable","onLoad","console","log","name","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tbasex: 0,\n\t\tbasey: 0,\n\t\tstepx: 0,\n\t\tstepy: 0,\n\t\troutes: null, //暂存计算出来的多条路径\n\t\tcell: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab,\n\t\t},\n\t\tmap: null, //二维地图\n\t\tadj: null, //存边，adj[i][j]是一个数组，数组中每个是与map[i][j]相连的map坐标\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n    },\n    // LIFE-CYCLE CALLBACKS:\n\tGetCell: function() {\n\t\tvar map_matrix = [\n\t\t\t[1,1,1,1,1,1,1,1,1,1,1],\n\t\t\t[1,1,0,0,0,1,0,0,0,1,1],\n\t\t\t[1,0,1,0,0,1,0,0,1,0,1],\n\t\t\t[1,0,0,1,1,0,1,1,0,0,1],\n\t\t\t[1,0,0,1,0,0,0,1,0,0,1],\n\t\t\t[1,1,1,1,1,1,1,1,1,1,1],\n\t\t\t[1,0,0,1,0,0,0,1,0,0,1],\n\t\t\t[1,0,0,1,1,0,1,1,0,0,1],\n\t\t\t[1,0,1,0,0,1,0,0,1,0,1],\n\t\t\t[1,1,0,0,0,1,0,0,0,1,1],\n\t\t\t[1,1,1,1,1,1,1,1,1,1,1],\n\t\t];\n\t\tthis.map = new Array();\n\t\tfor (var i = 0; i < 11; i++) {\n\t\t\tthis.map[i] = new Array();\n\t\t\tfor (var j = 0; j < 11; j++) {\n\t\t\t\tthis.map[i][j] = null;\n\t\t\t\tif (map_matrix[i][j] == 1) {\n\t\t\t\t\tvar newcell = cc.instantiate(this.cell);\n\t\t\t\t\tnewcell.parent = this.node; //将cell节点加到map节点之下\n\t\t\t\t\tnewcell.setPosition(this.basex+this.stepx*i, this.basey+this.stepy*j);\n\t\t\t\t\tthis.map[i][j] = newcell;\n\t\t\t\t\tvar cell_js = this.map[i][j].getComponent(\"Cell\");\n\t\t\t\t\tcell_js.mapx = i;\n\t\t\t\t\tcell_js.mapy = j;\n\t\t\t\t\t//以概率方式随机生成格子类型\n\t\t\t\t\tif ((i==0&&j==0) || (i==0&&j==10) || (i==10&&j==0) || (i==10&&j==10)) {\n\t\t\t\t\t\tcell_js.kind = 0;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar p = Math.random();\n\t\t\t\t\tif (p < 0.4)\n\t\t\t\t\t\tcell_js.kind = 0; //空白格\n\t\t\t\t\telse if (p < 0.7)\n\t\t\t\t\t\tcell_js.kind = 1; //卡牌格\n\t\t\t\t\telse\n\t\t\t\t\t\tcell_js.kind = 2; //事件格\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\n\tGetEdge: function() {\n\t\tthis.adj = new Array();\n\t\tfor (var i = 0; i < 11; i++) {\n\t\t\tthis.adj[i] = new Array();\n\t\t\tfor (var j = 0; j < 11; j++) {\n\t\t\t\t\tthis.adj[i][j] = new Array();\n\t\t\t}\n\t\t}\n\t\t//每一个四元数组表示：坐标(a[0],a[1])的cell和坐标(a[2],a[3])的cell之间有条边\n\t\tvar edge = [\n\t\t\t[0,0,0,1],[0,1,0,2],[0,2,0,3],[0,3,0,4],[0,4,0,5],\n\t\t\t[0,5,0,6],[0,6,0,7],[0,7,0,8],[0,8,0,9],[0,9,0,10],\n\t\t\t[0,0,1,0],[0,0,1,1],[0,5,1,5],[0,10,1,9],[0,10,1,10],\n\t\t\t[1,0,2,0],[1,1,2,2],[1,5,2,5],[1,9,2,8],[1,10,2,10],\n\t\t\t[2,0,3,0],[2,2,3,3],[2,5,3,4],[2,5,3,6],[2,8,3,7],[2,10,3,10],\n\t\t\t[3,3,3,4],[3,6,3,7],\n\t\t\t[3,0,4,0],[3,3,4,3],[3,7,4,7],[3,10,4,10],\n\t\t\t[4,0,5,0],[4,3,5,2],[4,7,5,8],[4,10,5,10],\n\t\t\t[5,0,5,1],[5,1,5,2],[5,2,5,3],[5,3,5,4],[5,4,5,5],\n\t\t\t[5,5,5,6],[5,6,5,7],[5,7,5,8],[5,8,5,9],[5,9,5,10],\n\t\t\t[5,0,6,0],[5,2,6,3],[5,8,6,7],[5,10,6,10],\n\t\t\t[6,0,7,0],[6,3,7,3],[6,7,7,7],[6,10,7,10],\n\t\t\t[7,3,7,4],[7,6,7,7],\n\t\t\t[7,0,8,0],[7,3,8,2],[7,4,8,5],[7,6,8,5],[7,7,8,8],[7,10,8,10],\n\t\t\t[8,0,9,0],[8,2,9,1],[8,5,9,5],[8,8,9,9],[8,10,9,10],\n\t\t\t[9,0,10,0],[9,1,10,0],[9,5,10,5],[9,9,10,10],[9,10,10,10],\n\t\t\t[10,0,10,1],[10,1,10,2],[10,2,10,3],[10,3,10,4],[10,4,10,5],\n\t\t\t[10,5,10,6],[10,6,10,7],[10,7,10,8],[10,8,10,9],[10,9,10,10]\n\t\t];\n\t\tfor (var i = 0; i < edge.length; i++) {\n\t\t\tthis.adj[edge[i][0]][edge[i][1]].push([edge[i][2], edge[i][3]]);\n\t\t\tthis.adj[edge[i][2]][edge[i][3]].push([edge[i][0], edge[i][1]]);\n\t\t}\n\t},\n\t\n\tDfsForRoute: function(nowpos, num, vis, routes, route) {\n\t\t/*\n\t\t\tnowpos为当前搜索到的cell，num为剩余步数\n\t\t\troutes:路径集合，route:当前所在的一条路径\n\t\t*/\n\t\tvar cell_js = nowpos.getComponent(\"Cell\"); //获得cell节点的js组件，以便获得组件中的属性\n\t\tvar x = cell_js.mapx, y = cell_js.mapy;\n\t\tif (vis[x][y] == 1)\n\t\t\treturn;\n\t\tvis[x][y] = 1;\n\t\troute.push(nowpos);\n\t\tif (num == 0) {\n\t\t\tvar newroute = [];\n\t\t\tfor (var i = 0; i < route.length; i++)\n\t\t\t\tnewroute.push(route[i]);\n\t\t\troutes.push(newroute);\n\t\t\troute.pop();\n\t\t\tvis[x][y] = 0;\n\t\t\treturn;\n\t\t}\n\t\tfor (var i = 0; i < this.adj[x][y].length; i++) {\n\t\t\tthis.DfsForRoute(this.map[this.adj[x][y][i][0]][this.adj[x][y][i][1]], num-1, vis, routes, route);\n\t\t}\n\t\troute.pop();\n\t\tvis[x][y] = 0;\n\t},\n\t\n\tchooseRoute: function() {\n\t\t//此函数下的this是cell.js\n\t\tvar par = this.node.parent.getComponent(\"GetMap\");\n\t\tvar route = par.routes[this.routeId];\n\t\t\n\t\t/*\n\t\tfor (var i = 0; i < route.length; i++) {\n\t\t\tvar cell_js = route[i].getComponent(\"Cell\");\n\t\t\tconsole.log(cell_js.mapx, cell_js.mapy);\n\t\t}\n\t\t*/\n\t\t\n\t\t//关闭所有节点的监听\n\t\tfor (var i = 0; i < 11; i++) {\n\t\t\tfor (var j = 0; j < 11; j++) {\n\t\t\t\tif (par.map[i][j] == null)\n\t\t\t\t\tcontinue;\n\t\t\t\tvar cell_js = par.map[i][j].getComponent(\"Cell\");\n\t\t\t\tif (cell_js.inMonitor == 1) {\n\t\t\t\t\tcell_js.inMonitor = 0;\n\t\t\t\t\tcell_js.resetColor();\n\t\t\t\t\tcell_js.routeId = null;\n\t\t\t\t\t//\n\t\t\t\t\tpar.map[i][j].off(\"mousedown\", this.chooseRoute, cell_js);\n\t\t\t\t\t//this.node.off(\"mousedown\", this.chooseRoute, cell_js);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t/*\n\t\t发送事件\n\t\t*/\n\t\tcc.game.emit('route-chosen', route);\n\t},\n\t\n\topenMonitor: function(routes) {\n\t\t//对每条路径的终点开启监听\n\t\tfor (var i = 0; i < routes.length; i++) {\n\t\t\tvar cell = routes[i][routes[i].length-1];\n\t\t\tvar cell_js = cell.getComponent(\"Cell\");\n\t\t\tcell_js.inMonitor = 1;\n\t\t\tcell_js.setColor();\n\t\t\tcell_js.routeId = i;\n\t\t\tcell.on(\"mousedown\", this.chooseRoute, cell_js);\n\t\t}\n\t},\n\t\n\tposEnable: function(nowpos, num) {\n\t\t//nowpos为cell类型的node, num为可移动步数\n\t\t//返回二维数组，第二维度的数组是由若干cell类型的node组成\n\t\tvar vis = []; //标记是否经过\n\t\tfor (var i = 0; i < 11; i++) {\n\t\t\tvis[i] = [];\n\t\t\tfor (var j = 0; j < 11; j++) {\n\t\t\t\tvis[i][j] = 0;\n\t\t\t}\n\t\t}\n\t\tvar routes = [];\n\t\tthis.DfsForRoute(nowpos, num, vis, routes, []); //搜索路径\n\t\tthis.routes = routes; //将得到的多条路径保存\n\t\tthis.openMonitor(routes); //对每条路径的终点开启监听\n\t\treturn routes;\n\t},\n\t\n    onLoad () {\n\t\tthis.GetCell(); //构建cell矩阵即map\n\t\tthis.GetEdge(); //建边\n\t\tconsole.log(this.name+\"onLoad\");\n\t},\n\n    start () {\n\t\t\n\t\t//this.posEnable(this.map[0][0], 5);\n\t\t\n\t\t\n    },\n\n    // update (dt) {},\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]}