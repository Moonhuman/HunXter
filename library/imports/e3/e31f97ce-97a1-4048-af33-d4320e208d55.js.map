{"version":3,"sources":["assets\\scripts\\Deck.js"],"names":["cc","Class","Component","properties","deck","Integer","role","addCard","cardID","push","cardDetail","node","instantiate","name","scaleX","scaleY","setPosition","parent","find","closeDetail","destroy","showCards","isPlayCard","getComponent","nowStep","i","length","window","global","cardnode","on","closeCards","children","off","initDeck","nowPlayer","cards","onLoad","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        deck:[cc.Integer],\r\n        role: null,\r\n    },\r\n    addCard:function(cardID){\r\n        deck.push(cardID);\r\n    },\r\n\t\r\n    cardDetail:function(){\r\n        var node=cc.instantiate(this);\r\n        node.name=\"card_detail\";\r\n        node.scaleX=1,node.scaleY=1;\r\n        node.setPosition(0,0);\r\n        node.parent=cc.find(\"Canvas\");\r\n    },\r\n    closeDetail:function(){\r\n        cc.find(\"Canvas/card_detail\").destroy();\r\n    },\r\n    showCards:function(){\r\n        var isPlayCard=(cc.find(\"Canvas\").getComponent(\"globalGame\").nowStep==3);\r\n        for (var i=0;i<this.deck.length;++i){\r\n            var cardID=this.deck[i];\r\n            var node=cc.instantiate(window.global.cardnode[cardID]);\r\n            node.scaleX=0.4,node.scaleY=0.4;\r\n            node.setPosition(200+i*200,0);\r\n            node.parent=this.node;\r\n            node.on(\"mouseenter\",this.cardDetail,node);\r\n            node.on(\"mouseleave\",this.closeDetail,node);\r\n        }\r\n    },\r\n\tcloseCards:function(){\r\n\t\tvar children=this.node.children;\r\n\t\tfor (var i=0;i<children.length;++i)\r\n\t\t\tchildren[i].destroy();\r\n\t\tthis.node.off(\"mousedown\",this.closeCards,this);\r\n\t\tthis.node.on(\"mousedown\",this.initDeck,this);\r\n    },\r\n    initDeck:function(){\r\n\t\tthis.role=cc.find(\"Canvas\").getComponent(\"globalGame\").nowPlayer;\r\n\t\tthis.deck=this.role.getComponent(\"Person\").cards;\r\n        this.showCards();\r\n        this.node.off(\"mousedown\",this.initDeck,this);\r\n        this.node.on(\"mousedown\",this.closeCards,this);\r\n    },\r\n    onLoad () {\r\n        \r\n    },\r\n\r\n    start () {\r\n\t\tthis.node.on(\"mousedown\",this.initDeck,this);\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}