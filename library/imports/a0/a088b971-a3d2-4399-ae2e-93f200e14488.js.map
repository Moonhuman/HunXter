{"version":3,"sources":["assets\\scripts\\Cell.js"],"names":["cc","Class","Component","properties","mapx","mapy","kind","inMonitor","routeID","setColor","node","color","Color","RED","resetColor","stepOnCell","Person","rand_event","Math","floor","random","note","Node","addComponent","Sprite","setPosition","parent","self","event_name","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","on","event","destroy","onLoad","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\t\tmapx: 0, //在map[i][j]中的横坐标\r\n\t\tmapy: 0,//在map[i][j]中的纵坐标\r\n\t\tkind: null, //格子的类型，0:空白格，1:卡牌格，2:事件格\r\n\t\tinMonitor: 0, //用来判断是否处于监听中的标记\r\n\t\trouteID: null, //记录这个cell是map中哪条route的终点，即在routes中的下标\r\n\t\t\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\t\r\n\tsetColor: function() {\r\n\t\t//设置cell的颜色为红色，表示可走\r\n\t\tthis.node.color = cc.Color.RED;\r\n\t},\r\n\t\r\n\tresetColor: function() {\r\n\t\t//还原cell的颜色\r\n\t\tthis.node.color = cc.color(255,255,255,255);\r\n\t},\r\n\t\r\n\tstepOnCell: function(Person) {\r\n\t\tif (this.kind == 0) //空白格\r\n\t\t\treturn;\r\n\t\telse if (this.kind == 1) //卡牌格\r\n\t\t\treturn; //还没写好卡牌，暂时先跳过\r\n\t\telse if (this.kind == 2) { //事件格\r\n\t\t\t//随机产生6个事件之一\r\n\t\t\tvar rand_event = Math.floor(Math.random()*6);\r\n\t\t\t//创建用来提示获得触发事件的精灵节点\r\n\t\t\tvar note = new cc.Node();\r\n            note.addComponent(cc.Sprite);\r\n\t\t\tnote.setPosition(0, 0);\r\n\t\t\tnote.parent = this.node.parent.parent;\r\n\t\t\tvar self = note, event_name;\r\n\t\t\tif (rand_event == 0) { //陷阱\r\n\t\t\t\tevent_name = \"陷阱\";\r\n\t\t\t}\t\r\n\t\t\telse if (rand_event == 1) { //监狱\r\n\t\t\t\tevent_name = \"监狱\";\r\n\t\t\t}\t\r\n\t\t\telse if (rand_event == 2) { //恶魔\r\n\t\t\t\tevent_name = \"恶魔\";\r\n\t\t\t}\t\r\n\t\t\telse if (rand_event == 3) { //奥利给\r\n\t\t\t\tevent_name = \"奥利给\";\r\n\t\t\t}\t\r\n\t\t\telse if (rand_event == 4) { //视野\r\n\t\t\t\tevent_name = \"视野\";\r\n\t\t\t}\t\r\n\t\t\telse if (rand_event == 5) { //天使\r\n\t\t\t\tevent_name = \"天使\";\r\n\t\t\t}\t\r\n\t\t\tcc.loader.loadRes(event_name, cc.SpriteFrame, function (err, spriteFrame) {\r\n\t\t\t\tself.getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n\t\t\t});\r\n\t\t\t//开启note节点的监听，点击后消失\r\n\t\t\tnote.on('mousedown', function ( event ) {\r\n\t\t\t\tthis.destroy();\r\n\t\t\t}, note);\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n\t\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\t\t\r\n\t},\r\n\r\n    start () {\r\n\t\t//设置格子图片\r\n\t\tvar self = this;\r\n\t\tif (this.kind == 0) { //空白格\r\n\t\t\tcc.loader.loadRes(\"cell\", cc.SpriteFrame, function (err, spriteFrame) {\r\n\t\t\t\tself.node.getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if (this.kind == 1) { //卡牌格\r\n\t\t\tcc.loader.loadRes(\"抽卡格\", cc.SpriteFrame, function (err, spriteFrame) {\r\n\t\t\t\tself.node.getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n\t\t\t});\r\n\t\t}\r\n\t\telse { //事件格\r\n\t\t\tcc.loader.loadRes(\"事件格\", cc.SpriteFrame, function (err, spriteFrame) {\r\n\t\t\t\tself.node.getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n\t\t\t});\r\n\t\t}\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}